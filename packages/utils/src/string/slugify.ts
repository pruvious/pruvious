const slugifyCharMap: Record<string, string> = {
  'َ': 'a',
  'ً': 'an',
  'ِ': 'e',
  'ٍ': 'en',
  'ٌ': 'on',
  'ُ': 'u',
  '˚': 'o',
  '∂': 'd',
  '٠': '0',
  '۰': '0',
  '١': '1',
  '۱': '1',
  '٢': '2',
  '۲': '2',
  '٣': '3',
  '۳': '3',
  '٤': '4',
  '۴': '4',
  '٥': '5',
  '۵': '5',
  '٦': '6',
  '۶': '6',
  '٧': '7',
  '۷': '7',
  '٨': '8',
  '۸': '8',
  '٩': '9',
  '۹': '9',
  'ª': 'a',
  'á': 'a',
  'à': 'a',
  'ă': 'a',
  'ắ': 'a',
  'ằ': 'a',
  'ẵ': 'a',
  'ẳ': 'a',
  'â': 'a',
  'ấ': 'a',
  'ầ': 'a',
  'ẫ': 'a',
  'ẩ': 'a',
  'å': 'a',
  'ä': 'ae',
  'ã': 'a',
  'ą': 'a',
  'ā': 'a',
  'ả': 'a',
  'ạ': 'a',
  'ặ': 'a',
  'ậ': 'a',
  'æ': 'ae',
  'ć': 'c',
  'č': 'c',
  'ç': 'c',
  'ď': 'd',
  'ð': 'd',
  'đ': 'dj',
  'é': 'e',
  'è': 'e',
  'ê': 'e',
  'ế': 'e',
  'ề': 'e',
  'ễ': 'e',
  'ể': 'e',
  'ě': 'e',
  'ë': 'e',
  'ẽ': 'e',
  'ė': 'e',
  'ę': 'e',
  'ē': 'e',
  'ẻ': 'e',
  'ẹ': 'e',
  'ệ': 'e',
  'ə': 'e',
  'ƒ': 'f',
  'ğ': 'g',
  'ģ': 'g',
  'í': 'i',
  'ì': 'i',
  'î': 'i',
  'ï': 'i',
  'ĩ': 'i',
  'i̇': 'i',
  'į': 'i',
  'ī': 'i',
  'ỉ': 'i',
  'ị': 'i',
  'ı': 'i',
  'ķ': 'k',
  'ľ': 'l',
  'ļ': 'l',
  'ł': 'l',
  'ǉ': 'lj',
  'ń': 'n',
  'ň': 'n',
  'ñ': 'n',
  'ņ': 'n',
  'ǌ': 'nj',
  'º': 'o',
  'ó': 'o',
  'ò': 'o',
  'ô': 'o',
  'ố': 'o',
  'ồ': 'o',
  'ỗ': 'o',
  'ổ': 'o',
  'ö': 'oe',
  'ő': 'o',
  'õ': 'o',
  'ø': 'o',
  'ō': 'o',
  'ỏ': 'o',
  'ơ': 'o',
  'ớ': 'o',
  'ờ': 'o',
  'ỡ': 'o',
  'ở': 'o',
  'ợ': 'o',
  'ọ': 'o',
  'ộ': 'o',
  'œ': 'oe',
  'ŕ': 'r',
  'ř': 'r',
  'ś': 's',
  'š': 's',
  'ş': 's',
  'ṣ': 's',
  'ș': 's',
  'ß': 'ss',
  'ť': 't',
  'ţ': 't',
  'ț': 't',
  'ú': 'u',
  'ù': 'u',
  'û': 'u',
  'ů': 'u',
  'ü': 'ue',
  'ű': 'u',
  'ũ': 'u',
  'ų': 'u',
  'ū': 'u',
  'ủ': 'u',
  'ư': 'u',
  'ứ': 'u',
  'ừ': 'u',
  'ữ': 'u',
  'ử': 'u',
  'ự': 'u',
  'ụ': 'u',
  'ẃ': 'w',
  'ẁ': 'w',
  'ŵ': 'w',
  'ẅ': 'w',
  'ý': 'y',
  'ỳ': 'y',
  'ŷ': 'y',
  'ÿ': 'y',
  'ỹ': 'y',
  'ỷ': 'y',
  'ỵ': 'y',
  'ź': 'z',
  'ž': 'z',
  'ż': 'z',
  'þ': 'th',
  'α': 'a',
  'ά': 'a',
  'β': 'b',
  'γ': 'g',
  'δ': 'd',
  'ε': 'e',
  'έ': 'e',
  'ζ': 'z',
  'η': 'h',
  'ή': 'h',
  'θ': '8',
  'ι': 'i',
  'ί': 'i',
  'ϊ': 'i',
  'ΐ': 'i',
  'κ': 'k',
  'λ': 'l',
  'μ': 'm',
  'ν': 'n',
  'ξ': '3',
  'ο': 'o',
  'ό': 'o',
  'π': 'p',
  'ρ': 'r',
  'σ': 's',
  'ς': 's',
  'τ': 't',
  'υ': 'y',
  'ύ': 'y',
  'ϋ': 'y',
  'ΰ': 'y',
  'φ': 'f',
  'χ': 'x',
  'ψ': 'ps',
  'ω': 'w',
  'ώ': 'w',
  'а': 'a',
  'ә': 'ae',
  'б': 'b',
  'в': 'v',
  'г': 'g',
  'ґ': 'g',
  'ғ': 'gh',
  'д': 'd',
  'ђ': 'dj',
  'е': 'e',
  'ё': 'yo',
  'є': 'ye',
  'ж': 'zh',
  'з': 'z',
  'и': 'i',
  'ѝ': 'u',
  'і': 'i',
  'ї': 'yi',
  'й': 'j',
  'ј': 'j',
  'к': 'k',
  'қ': 'kh',
  'л': 'l',
  'љ': 'lj',
  'м': 'm',
  'н': 'n',
  'ң': 'ng',
  'њ': 'nj',
  'о': 'o',
  'ө': 'oe',
  'п': 'p',
  'р': 'r',
  'с': 's',
  'т': 't',
  'ћ': 'c',
  'у': 'u',
  'ү': 'ue',
  'ұ': 'u',
  'ф': 'f',
  'х': 'h',
  'һ': 'h',
  'ц': 'c',
  'ч': 'ch',
  'џ': 'dz',
  'ш': 'sh',
  'щ': 'sh',
  'ъ': 'u',
  'ы': 'y',
  'ь': '',
  'э': 'e',
  'ю': 'yu',
  'я': 'ya',
  'ა': 'a',
  'ბ': 'b',
  'გ': 'g',
  'დ': 'd',
  'ე': 'e',
  'ვ': 'v',
  'ზ': 'z',
  'თ': 't',
  'ი': 'i',
  'კ': 'k',
  'ლ': 'l',
  'მ': 'm',
  'ნ': 'n',
  'ო': 'o',
  'პ': 'p',
  'ჟ': 'zh',
  'რ': 'r',
  'ს': 's',
  'ტ': 't',
  'უ': 'u',
  'ფ': 'f',
  'ქ': 'k',
  'ღ': 'gh',
  'ყ': 'q',
  'შ': 'sh',
  'ჩ': 'ch',
  'ც': 'ts',
  'ძ': 'dz',
  'წ': 'ts',
  'ჭ': 'ch',
  'ხ': 'kh',
  'ჯ': 'j',
  'ჰ': 'h',
  'ա': 'a',
  'բ': 'b',
  'գ': 'g',
  'դ': 'd',
  'ե': 'e',
  'և': 'ev',
  'զ': 'z',
  'է': 'e',
  'ը': 'y',
  'թ': 't',
  'ժ': 'jh',
  'ի': 'i',
  'լ': 'l',
  'խ': 'x',
  'ծ': 'c',
  'կ': 'k',
  'հ': 'h',
  'ձ': 'd',
  'ղ': 'gh',
  'ճ': 'tw',
  'մ': 'm',
  'յ': 'y',
  'ն': 'n',
  'շ': 'sh',
  'չ': 'ch',
  'պ': 'p',
  'ջ': 'j',
  'ռ': 'r',
  'ս': 's',
  'վ': 'v',
  'տ': 't',
  'ր': 'r',
  'ց': 'c',
  'փ': 'p',
  'ք': 'q',
  'օ': 'o',
  'ֆ': 'f',
  'ء': 'a',
  'آ': 'aa',
  'أ': 'a',
  'ؤ': 'u',
  'إ': 'i',
  'ئ': 'e',
  'ا': 'a',
  'ب': 'b',
  'پ': 'p',
  'ة': 'h',
  'ت': 't',
  'ث': 'th',
  'ج': 'j',
  'چ': 'ch',
  'ح': 'h',
  'خ': 'kh',
  'د': 'd',
  'ذ': 'th',
  'ر': 'r',
  'ز': 'z',
  'ژ': 'zh',
  'س': 's',
  'ش': 'sh',
  'ص': 's',
  'ض': 'dh',
  'ط': 't',
  'ظ': 'z',
  'ع': 'a',
  'غ': 'gh',
  'ف': 'f',
  'ق': 'q',
  'ك': 'k',
  'ک': 'k',
  'گ': 'g',
  'ل': 'l',
  'ﻵ': 'laa',
  'ﻷ': 'laa',
  'ﻹ': 'lai',
  'ﻻ': 'la',
  'م': 'm',
  'ن': 'n',
  'ه': 'h',
  'و': 'w',
  'ى': 'a',
  'ي': 'y',
  'ی': 'y',
}

/**
 * Converts a `string` to a URL-friendly slug.
 *
 * @example
 * ```ts
 * slugify('Hello, World!') // hello-world
 * ```
 */
export function slugify(string: string) {
  let result = ''
  let split = false
  let index = 0
  let prev: string | undefined = undefined

  for (const curr of string.trim()) {
    const isPrevLower = prev && prev.toLowerCase() === prev

    if ((curr >= '0' && curr <= '9') || (curr >= 'a' && curr <= 'z')) {
      result += split && index && (!prev || isPrevLower) ? `-${curr}` : curr
      split = false
      index++
    } else {
      const lower = curr.toLowerCase()

      if (curr >= 'A' && curr <= 'Z') {
        result += index && (!prev || isPrevLower) ? `-${lower}` : lower
        split = false
        index++
      } else if (slugifyCharMap[lower]) {
        result +=
          curr !== lower && index && (!prev || isPrevLower) ? `-${slugifyCharMap[lower]}` : slugifyCharMap[lower]
        split = false
        index++
      } else {
        split = true
      }
    }

    prev = curr
  }

  return result
}
